!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("dotenv")):"function"==typeof define&&define.amd?define(["dotenv"],e):(t||self).opencageApiClient=e(t.dotenv)}(this,function(t){function e(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}),e.default=t,e}var n=/*#__PURE__*/e(t);function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(r=function(){return!!t})()}function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o.apply(this,arguments)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function i(t){var e="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(r())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var u=new(t.bind.apply(t,o));return n&&c(u,n.prototype),u}(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,t)},i(t)}var f=/*#__PURE__*/function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).response=void 0,e.status=void 0,e}var n,r;return r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,c(n,r),e}(/*#__PURE__*/i(Error));function s(t,e){var n=new f(e);return n.response={status:{code:t,message:e}},n}var a=function(t){if(t.status>=200&&t.status<300)return t;var e=new f(t.statusText);throw e.status={code:t.status,message:t.statusText},e},p=function(t){return t.json()};function l(t){return void 0===t||""===t}function y(t){return null==t}return n.config(),{geocode:function(t){return new Promise(function(e,n){if(y(t))n(s(400,"missing or bad query"));else{var r=function(t){var e=o({},t),n="https://api.opencagedata.com/geocode/v1/json",r=!1;return l(t.proxyURL)?(l(t.key)&&(e.key=process.env.OPENCAGE_API_KEY||process.env.OCD_API_KEY),l(e.key)&&(r=!0)):(n=t.proxyURL,delete e.proxyURL),{missingKey:r,endpoint:n,query:e}}(t);if(r.missingKey)n(s(401,"missing API key"));else{var u=r.endpoint,c=function(t){return y(t)?"":Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}(r.query);!function(t,e,n){try{return fetch(t).then(a).then(p).then(function(t){e(t)}).catch(function(t){n(t)}),Promise.resolve()}catch(t){return Promise.reject(t)}}(u+"?"+c,e,n)}}})}}});
//# sourceMappingURL=opencage-api.umd.js.map
