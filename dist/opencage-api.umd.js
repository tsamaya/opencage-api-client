!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).opencage={})}(this,function(t){function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(e=function(){return!!t})()}function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},n.apply(this,arguments)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function u(t){var n="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,u)}function u(){return function(t,n,o){if(e())return Reflect.construct.apply(null,arguments);var u=[null];u.push.apply(u,n);var c=new(t.bind.apply(t,u));return o&&r(c,o.prototype),c}(t,arguments,o(this).constructor)}return u.prototype=Object.create(t.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),r(u,t)},u(t)}var c=/*#__PURE__*/function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).response=void 0,e.status=void 0,e}var n,o;return o=t,(n=e).prototype=Object.create(o.prototype),n.prototype.constructor=n,r(n,o),e}(/*#__PURE__*/u(Error));function i(t,e){var n=new c(e),o={code:t,message:e};return n.status=o,n.response={status:o},n}function s(t){if(t.status>=200&&t.status<300)return t;var e=new c(t.statusText);throw e.status={code:t.status,message:t.statusText},e.response=t,e}function a(t){return t.json()}function p(t){return void 0===t||""===t}function f(t){return null==t}t.geocode=function(t){try{return Promise.resolve(new Promise(function(e,o){if(f(t))o(i(400,"missing or bad query"));else{var r=function(t){var e=n({},t),o="https://api.opencagedata.com/geocode/v1/json",r=!1;return p(t.proxyURL)?(p(t.key)&&(e.key=process.env.OPENCAGE_API_KEY),p(e.key)&&(r=!0)):(o=t.proxyURL,delete e.proxyURL),{missingKey:r,endpoint:o,query:e}}(t);if(r.missingKey)o(i(401,"missing API key"));else{var u=r.endpoint,c=function(t){return f(t)?"":Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e]||"")}).join("&")}(r.query);!function(t,e,n){try{return fetch(t,{method:"GET",headers:{"User-Agent":"OpenCageData Geocoding NodeJS API Client","Content-Type":"application/json",Accept:"application/json"}}).then(s).then(a).then(function(t){e(t)}).catch(function(t){n(t)}),Promise.resolve()}catch(t){return Promise.reject(t)}}(u+"?"+c,e,o)}}}))}catch(t){return Promise.reject(t)}}});
//# sourceMappingURL=opencage-api.umd.js.map
