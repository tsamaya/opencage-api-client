{"version":3,"file":"fetch.js","sources":["webpack://opencage-api-client/./src/fetch.ts"],"sourcesContent":["import { version } from './version';\nimport { checkFetchStatus, parseJSON } from './helpers/geocodeHelpers';\n\nconst USER_AGENT = `OpenCageData Geocoding NodeJS API Client/${version}`;\n\n/**\n * fetches the url and returns a promise\n * @param  {String}  url     the url to fetch\n * @param  {Function} resolve the resolve function\n * @param  {Function} reject  the reject function\n */\nexport async function fetchUrl(\n  url: string,\n  resolve: any,\n  reject: any,\n  signal?: AbortSignal\n) {\n  fetch(url, {\n    method: 'GET',\n    headers: {\n      'User-Agent': USER_AGENT,\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n    signal,\n  })\n    .then(checkFetchStatus)\n    .then(parseJSON)\n    .then((data) => {\n      // console.debug('request succeeded with JSON response', data);\n      resolve(data);\n    })\n    .catch((error) => {\n      // console.debug('request failed', { error });\n      reject(error);\n    });\n}\n"],"names":["USER_AGENT","version","fetchUrl","url","resolve","reject","signal","fetch","checkFetchStatus","parseJSON","data","error"],"mappings":";;AAGA,MAAMA,aAAa,CAAC,yCAAyC,EAAEC,SAAS;AAQjE,eAAeC,SACpBC,GAAW,EACXC,OAAY,EACZC,MAAW,EACXC,MAAoB;IAEpBC,MAAMJ,KAAK;QACT,QAAQ;QACR,SAAS;YACP,cAAcH;YACd,gBAAgB;YAChB,QAAQ;QACV;QACAM;IACF,GACG,IAAI,CAACE,kBACL,IAAI,CAACC,WACL,IAAI,CAAC,CAACC;QAELN,QAAQM;IACV,GACC,KAAK,CAAC,CAACC;QAENN,OAAOM;IACT;AACJ"}