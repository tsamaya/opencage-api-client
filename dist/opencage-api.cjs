function t(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,e}var e=/*#__PURE__*/t(require("dotenv"));function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(r=function(){return!!t})()}function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n.apply(this,arguments)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(r())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var c=new(t.bind.apply(t,o));return n&&u(c,n.prototype),c}(t,arguments,o(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)},c(t)}var i=function(t){try{return Promise.resolve(new Promise(function(e,r){if(O(t))r(y(400,f));else{var o=function(t){var e=n({},t),r=a,o=!1;return b(t.proxyURL)?(b(t.key)&&(e.key=process.env.OPENCAGE_API_KEY),b(e.key)&&(o=!0)):(r=t.proxyURL,delete e.proxyURL),{missingKey:o,endpoint:r,query:e}}(t);if(o.missingKey)r(y(401,p));else{var u=o.endpoint,c=function(t){return O(t)?"":Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e]||"")}).join("&")}(o.query);s(u+"?"+c,e,r)}}}))}catch(t){return Promise.reject(t)}},s=function(t,e,r){try{return fetch(t).then(v).then(d).then(function(t){e(t)}).catch(function(t){r(t)}),Promise.resolve()}catch(t){return Promise.reject(t)}},a="https://api.opencagedata.com/geocode/v1/json",f="missing or bad query",p="missing API key",l=/*#__PURE__*/function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).response=void 0,e.status=void 0,e}var r,n;return n=t,(r=e).prototype=Object.create(n.prototype),r.prototype.constructor=r,u(r,n),e}(/*#__PURE__*/c(Error));function y(t,e){var r=new l(e),n={code:t,message:e};return r.status=n,r.response={status:n},r}function v(t){if(t.status>=200&&t.status<300)return t;var e=new l(t.statusText);throw e.status={code:t.status,message:t.statusText},e.response=t,e}function d(t){return t.json()}function b(t){return void 0===t||""===t}function O(t){return null==t}e.config();var g={geocode:i};exports.GeocodeError=l,exports.default=g,exports.geocode=i;
//# sourceMappingURL=opencage-api.cjs.map
