!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("opencage",[],t):"object"==typeof exports?exports.opencage=t():e.opencage=t()}(this,()=>(()=>{"use strict";var e={};e.d=(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{geocode:()=>i});class o extends Error{response;status;constructor(e){super(e),this.name="GeocodeError"}}function n(e,t){let n=new o(t),r={code:e,message:t};return n.status=r,n.response={status:r},n}function r(e){if(e.status>=200&&e.status<300)return e;let t=new o(e.statusText);throw t.status={code:e.status,message:e.statusText},t.response=e,t}function s(e){return e.json()}function a(e){return void 0===e||""===e}async function c(e,t,o,n){fetch(e,{method:"GET",headers:{"User-Agent":"OpenCageData Geocoding NodeJS API Client/2.0.0-beta.2","Content-Type":"application/json",Accept:"application/json"},signal:n}).then(r).then(s).then(e=>{t(e)}).catch(e=>{o(e)})}async function i(e,t){return new Promise((o,r)=>{if(null==e)return void r(n(400,"missing or bad query"));let s=function(e){let t={...e},o="https://api.opencagedata.com/geocode/v1/json",n=!1;return a(e.proxyURL)?(a(e.key)&&(t.key=process.env.OPENCAGE_API_KEY),a(t.key)&&(n=!0)):(o=e.proxyURL,delete t.proxyURL),{missingKey:n,endpoint:o,query:t}}(e);if(s.missingKey)return void r(n(401,"missing API key"));let{query:i,endpoint:u}=s,p=null==i?"":Object.keys(i).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e]||"")}`).join("&");c(`${u}?${p}`,o,r,t?.signal)})}return t})());
//# sourceMappingURL=opencage-api.min.js.map