!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("opencage",[],t):"object"==typeof exports?exports.opencage=t():e.opencage=t()}(this,()=>(()=>{"use strict";var e={};e.d=(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{geocode:()=>i});class o extends Error{response;status;constructor(e){super(e),this.name="GeocodeError"}}function n(e){if(e.status>=200&&e.status<300)return e;let t=e.statusText||`HTTP error ${e.status}`,n=new o(t);throw n.status={code:e.status,message:t},n.response=e,n}function r(e){return e.json()}async function s(e,t,o,s){fetch(e,{method:"GET",headers:{"User-Agent":"OpenCageData Geocoding NodeJS API Client/2.1.0-alpha.1","Content-Type":"application/json",Accept:"application/json"},signal:s}).then(n).then(r).then(e=>{t(e)}).catch(e=>{o(e)})}function a(e,t){let n=new o(t),r={code:e,message:t};return n.status=r,n.response={status:r},n}function c(e){return void 0===e||""===e}async function i(e,t){return new Promise((o,n)=>{let r,i,p;if(null==e)return void n(a(400,"missing or bad query"));let u=(r={...e},i="https://api.opencagedata.com/geocode/v1/json",p=!1,c(e.proxyURL)&&c(t?.proxyURL)?(c(e.key)&&"undefined"!=typeof process&&(r.key=process.env.OPENCAGE_API_KEY),c(r.key)&&(p=!0)):(c(i=t?.proxyURL)&&(i=e.proxyURL),delete r.proxyURL),{missingKey:p,endpoint:i,query:r});if(u.missingKey)return void n(a(401,"missing API key"));let{query:d,endpoint:y}=u,l=null==d?"":Object.keys(d).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(d[e]||"")}`).join("&");s(`${y}?${l}`,o,n,t?.signal)})}return t})());
//# sourceMappingURL=opencage-api.min.js.map